


使用 TestProject > MySQL > 

		systex.sql 、上班前測試.sql 、上班前測試2Company.sql   
		
		複習 union、
			join、
			alter、
			select、
			update、
			delete、
			insert into
			
			自訂Procedure @ Variable 跟 no prepend Variable的差異
			
			該用SET 就要SET 不要用 :=
			SELECT @var := 1 + 1; will change @var to 2, and return 2.
			SELECT @var = 1 + 1; will leave @var unchanged and return a boolean 
							(1 or 0 depending on the current value of @var)
			
			
			CREATE PROCEDURE prc_test ()
			BEGIN
			    DECLARE var2 INT DEFAULT 1;
			    SET var2 = var2 + 1;
			    SET @var2 = @var2 + 1;
			    SELECT  var2, @var2;
			END;
			
			SET @var2 = 1;
			
			CALL prc_test();
			
			var2  @var2
			---   ---
			2     2
			
			
			CALL prc_test();
			
			var2  @var2
			---   ---
			2     3
			
			
			CALL prc_test();
			
			var2  @var2
			---   ---
			2     4
			
			
			
			
			
			
			
			
			
			
			<Trigger跟function 最後再看看吧>


	【隔離層級】  https://openhome.cc/Gossip/HibernateGossip/IsolationLevel.html
				DirtyRead			Unrepeatable 		Read	Phantom Read
			Read uncommitted			YES				YES			YES
			Read committed				NO				YES			YES
			Repreatable read			NO				NO			YES
			Serializable				NO				NO			NO
			
			
			
			
			
			
			
			
			
			
			
【更新遺失（lost update）】

		基本上就是指某個交易對欄位進行更新的資訊，因另一個交易的介入而遺失。
		
		例如，兩個以上交易在進行同一欄位的更新時，若沒有對欄位進行鎖定，若交易A進行COMMIT，交易B因故ROLLBACK，則交易A所作的更新就會發生遺失的問題：
			交易A更新欄位1
			交易B更新欄位1
			交易A COMMIT
			交易B ROLLBACK
		另一種可能的情況是，如果交易A在交易B前後進行更新與COMMIT，則交易B所作的更新將會遺失，又稱為二次更新遺失（second lost update），例如：
			交易A更新欄位1
			交易B更新欄位1
			交易B COMMIT
			交易A COMMIT
		在以上的情況，交易B所進行的更新將會遺失。
			
			
			
【髒讀（dirty read）】

		兩個交易同時進行，其中一個交易更新資料，另一個交易讀取了尚未COMMIT的資料，就有可能發生髒讀問題。例如：
			交易A更新欄位1
			交易B讀取欄位1
			交易A ROLLBACK
			交易B COMMIT
		在以上的情況下，交易B讀取的是不正確的資料。
		
			
【無法重複的讀取（unrepeatable read）】

		某個交易兩次讀取同一欄位的資料並不一致，例如，如果交易A在交易B前後進行資料的讀取，則會得到不同的結果。
			交易A讀取欄位1
			交易B更新欄位1
			交易B COMMIT
			交易A讀取欄位1
		在以上的情況，交易A讀取兩次欄位1，但卻得到不同的結果。
		
			
【幻讀（phantom read）】

	如果交易A進行兩次查詢，在兩次查詢之中有個交易B插入一筆新資料或刪除一筆新資料，第二次查詢時得到的資料多了第一次查詢時所沒有的筆數，或者少了一筆。
		交易A進行查詢得到五筆資料
		交易B插入一筆資料
		交易B COMMIT
	交易A進行查詢得到六筆資料			