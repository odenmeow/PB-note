# How Does JWT Authentication Work? (JSON Web Token) | Tokens vs Sessions

> Only the articles I read will be memo with detail. Excluding videos, but including topics related to reading.

> I only memo (or take notes on) the sentences I don't understand here.

> ä¸ç†Ÿæ‚‰çš„å–®å­—ä¹ŸæœƒåŠ ä¸Š(é›–ç„¶å¯èƒ½çŸ¥é“æ„æ€)ã€ç²—é«”åŸºæœ¬ä¸Šå¯èƒ½æœ‰è£œå……åœ¨å–®å­—

> https://www.youtube.com/watch?v=hoBSjmrwF1k

## å–®å­—

--- 

|                             |                           |                               |                                 |                           |
|:---------------------------:|:-------------------------:|:-----------------------------:|:-------------------------------:|:-------------------------:|
| [subsequent](#subsequent)   | [secret](#secret)         | [inextricably](#inextricably) | [dedicate](#dedicate)           | [relative](#relative)     |
| [discuss](#discuss)         | [relevant](#relevant)     | [prosperity](#prosperity)     | [signature](#signature)         | [audience](#audience)     |
| [illness](#illness)         | [leaflet](#leaflet)       | [fortune](#fortune)           | [practically](#practically)     | [through](#through)       |
| [disease](#disease)         | [vulnerable](#vulnerable) | [innovative](#innovative)     | [Theoretically](#Theoretically) | [throughput](#throughput) |
| [resignation](#resignation) | [intertwine](#intertwine) | [innovation](#innovation)     | [relatively](#relatively)       |                           |

`subsequent`: /ËˆsÊŒb.sÉª.kwÉ™nt/  <span id='subsequent'> </span>

- `adj` happening after something else

- The book discusses his illness and subsequent resignation from politics.

- ä¸æ˜¯subsequence (é‡éŸ³åå¾Œ) é€™å€‹å–®å­—é‡éŸ³åœ¨å‰é¢ä½†`ç¢ºå¯¦æœ‰sÉª`çš„éŸ³

`discuss`: /dÉªËˆskÊŒs/        <span id='discuss'> </span>

- `verb` è¨è«–
- æ³¨æ„ç™¼éŸ³æœ‰é» `å°¬s`çš„éŸ³  ä¸æ˜¯`é‰»s`
- We willÂ *discuss*Â the proposal at theÂ meeting
  - æˆ‘å€‘å°‡åœ¨æœƒè­°ä¸Šè¨è«–é€™é …æè­°ã€‚

`illness`: /ËˆÉªl.nÉ™s/        <span id='illness'> </span>

- `noun`  a disease of the body or mind

`disease`: /dÉªËˆziËz       <span id='disease'> </span>

`resignation`:/ËŒrez.ÉªÉ¡ËˆneÉª.ÊƒÉ™n/           <span id='resignation'> </span>

- `noun` the act of telling your employer that you are leaving your job
- æ³¨æ„é‡éŸ³åœ¨ nation ä¸æ˜¯ /ËŒreËˆzÉªÉ¡ neÉª.ÊƒÉ™n/ ï¼Œå¦å¤–è¦æœ‰é»è½ä¸åˆ°g æ‰å° ! ä¸€é»é»é “åœ¨é‚£é‚Š
- HisÂ **resignation**Â came as a surprise toÂ everyone.
  - ä»–çš„è¾­è·ä»¤å¤§å®¶æ„Ÿåˆ°é©šè¨ã€‚ 

`secret` : /Ë‹sikrÉªt/        <span id='secret'> </span>

- åŠæ©‹ /ËˆsiË.krÉ™t/  ä½†æ˜¯ Google YTR Yahooéƒ½æ˜¯ä¸Šé¢é‚£å€‹!

`relevant` : /Ëˆrel.É™.vÉ™nt/        <span id='relevant'> </span>

- `adg` connected with what is happening or being discussed
- Education should be **relevant to** the child's needs.
- For further information, please refer to the relevant **leaflet**.
- `2:40` æœ‰é»é›£è½å‡ºä¾†

`leaflet` : /ËˆliË.flÉ™t/ æˆ– /ËˆliË.flet/        <span id='leaflet'> </span>

- `noun` å‚³å–® (æ•£çš„) ã€ `verb` ç™¼å‚³å–®
- They **leafleted** the area two weeks before the event.

`vulnerable ` : /ËˆvÊŒl.nÉš.É™.bÉ™l/       <span id='vulnerable'> </span>

- able to be easily physically, emotionally, or mentally hurt, influenced, or attacked.
- `adj` å®¹æ˜“å—å‚·çš„
- I felt very **vulnerable**, standing there without any **clothes** on.  [ /kloÊŠÃ°z/ ]

`intertwine` : /ËŒÉªn.tÌ¬ÉšËˆtwaÉªn/       <span id='intertwine'> </span>

- `verb` ï¼ˆä½¿ï¼‰çºçµï¼Œï¼ˆä½¿ï¼‰çºç¹åœ¨ä¸€èµ·;ï¼ˆä½¿ï¼‰ç·Šå¯†é—œè¯

- to twist or be twisted together, or to be connected so as to be difficult to separate

- The town's **prosperity** is **inextricably intertwined** with the **fortunes** of the factory.

`inextricably` : /ËŒÉªn.ÉªkËˆstrÉªk.É™.bli/       <span id='inextricably'> </span>

- é€™å–®å­—è¶…ç´šé›£å”¸å‡ºä¾† 

- `adv` å¯†ä¸å¯åˆ†åœ°

- in a way that is unable to be separated, released, or escaped from

- His name was **inextricably** linked with the environmental movement.

`prosperity` : /prÉ‘ËËˆsper.É™.tÌ¬i/           <span id='prosperity'> </span>

- è¦‹éä½†å¸¸å«ä¸å‡ºæ­£ç¢ºç™¼éŸ³å“ˆå“ˆ

- `noun` the state of being successful and having a lot of money

- æˆåŠŸã€ç¶“æ¿Ÿä¸Šçš„ç¹æ¦® ã€æ˜Œç››

`fortune` : /ËˆfÉ”Ër.tÊƒuËn/     <span id='fortune'> </span>

- a large amount of money, goods, property, etc. 
- `noun` ä¸€å¤§ç­†éŒ¢ï¼›å¤§é‡è²¡ç”£

`innovative` : /ËˆÉªn.É™.veÉª.tÌ¬Éªv/      <span id='innovative'> </span>

- <mark>é‡éŸ³åªæœ‰å‰é¢</mark> ä¸æ˜¯ /Éªn.É™ËˆveÉªtÌ¬Éªv/ ğŸ’¡
- `adj` å‰µæ–°çš„ æ–°ç©çš„ using new methods or ideas
- She was an **imaginative** and innovative manager.

`innovation` : /ËŒÉªn.É™ËˆveÉª.ÊƒÉ™n/        <span id='innovation'> </span>

- å¿µçš„æ™‚å€™å¥½åƒä¸ç”¨æ•…æ„å‰é¢æ”¾å¾ˆè¼• åªæœ‰å­—å…¸æœƒé‚£æ¨£

- `noun`  (the use of) a new idea or method æ–°æ–¹æ³•

- the latest innovations in computer technology

`imaginative` : /ÉªËˆmÃ¦dÊ’.É™.nÉ™.tÌ¬Éªv/ <span id='imaginative'> </span>

- `adj` æœ‰å‰µæ„çš„

- new, original, and cleverã€æƒ³åƒåŠ›è±å¯Œçš„

`dedicate` : /Ëˆded.Éª.keÉªt/   Éªç‚ºä¸»  <span id='dedicate'> </span>

- to give all of your energy, time, etc.

- He has **dedicated** his life to scientific research.

- dedicated å¿µä½œ /Ëˆded.Éª.keÉªtÉªd/

`signature` : Â /ËˆsÉªÉ¡.nÉ™.tÊƒÉš/    <span id='signature'> </span>

- æ³¨éŸ³ç™¼éŸ³ å¾Œé¢éƒ½æ˜¯è¼•è² ä¸æ˜¯nature /ËˆneÉª.tÊƒÉš/ å–”!!

- `noun` ç°½å

`practically` : /ËˆprÃ¦k.tÉª.kÉ™l.i/  <span id='practically'> </span>

- `adv` almost or very nearly 

- `adv` å¯¦éš›ä¸Š / å¯¦éš›åœ° 

- in a way that relates to real situations and actions rather than ideas

`Theoretically` : /ËŒÎ¸iË.É™ËˆretÌ¬.kÉ™l.i/ <span id='Theoretically'> </span>

- `adv` ç†è«–ä¸Š

- in a way that obeys some rules but is not likely

- Theoretically, it's a good idea to live without a car, but practically speaking, it would be difficult to manage without one.

`relatively` :  /Ëˆrel.É™.tÌ¬Éªv.li/  <span id='relatively'> </span>

- é‡éŸ³åœ¨å‰å•¦ è·Ÿæˆ‘å°è±¡ä¸åŒ

`relative` : /Ëˆrel.É™.tÌ¬Éªv/  <span id='relative'> </span>

- `noun` è¦ªå±¬ a member of your family

- `adj` ç›¸å°çš„ 

- Since I got a job, I've been living in relative comfort (= more comfort than before).

- We weighed up the relative advantages of driving there or going by train.

`audience` :  Â /ËˆÉ‘Ë.di.É™ns/  <span id='audience'> </span>

- `9:00` 

- è§€çœ¾ / è®€è€… / è½è€… 

- è§€çœ¾äººæ•¸ / è½çœ¾äººæ•¸  / è®€è€…äººæ•¸

- She **lectures** to audiences all over the world. [ /Ëˆlek.tÊƒÉš/  ]

`through` :  /Î¸ruË/  <span id='through'> </span>

- `9:47` 
  
  `adv` é€šéã€ç©¿è¶Š
  
  - from one end orÂ [side](https://dictionary.cambridge.org/zht/%E8%A9%9E%E5%85%B8/%E8%8B%B1%E8%AA%9E-%E6%BC%A2%E8%AA%9E-%E7%B9%81%E9%AB%94/side "side")Â of something to the other 
  
  - They walked slowly through the woods.
  
  - WeÂ [drove](https://dictionary.cambridge.org/zht/%E8%A9%9E%E5%85%B8/%E8%8B%B1%E8%AA%9E-%E6%BC%A2%E8%AA%9E-%E7%B9%81%E9%AB%94/drove "drove")Â through theÂ [tunnel](https://dictionary.cambridge.org/zht/%E8%A9%9E%E5%85%B8/%E8%8B%B1%E8%AA%9E-%E6%BC%A2%E8%AA%9E-%E7%B9%81%E9%AB%94/tunnel "tunnel"). [/ËˆtÊŒn.É™l/ ]

- `adv` è‡ªå§‹è‡³çµ‚  
  
  - from the beginning to the end of a period of time
  
  - It rained all/right through June and **into the first half** of July.
    
    - é›¨ä¸‹äº†æ•´å€‹6æœˆä¸€ç›´åˆ°7æœˆçš„å‰åŠå€‹æœˆã€‚
  
  - We sat **through two of the speeches** and then left.
    
    - æˆ‘å€‘ (éå») åè‘— (è½å®Œ) å…©å€‹æ¼”è¬› / èª²ç¨‹ ç„¶å¾Œé›¢é–‹ã€‚
  
  - She had just enough energy to get through the day.
    
    - å¥¹æœ‰å‰›å¥½çš„èƒ½é‡åº¦éä¸€å¤©ã€‚
  
  - She works Monday through Thursday

`throughput` : Â /ËˆÎ¸ruË.pÊŠt/  <span id='throughput' style='color:yellow'> -</span>

- `noun` ç”Ÿç”¢ç‡ 

- an amount of work, etc. done in a particular period of time

- We need to improve our throughput because demand is high at the moment.

## ç‰‡èª

---

`start off` : æè¿°äº‹æˆ–ç‰©çš„é–‹å§‹éšæ®µ

- it's going to start off the same way.

`it's going to` : å¸¸è¦‹çŸ­èªã€è¡¨é”æŸä»¶äº‹æƒ…æˆ–æƒ…æ³å°‡ç™¼ç”Ÿ

- It's going to rain tomorrow.
- He's going to start a new job next month.

`as opposed to`  : ç”¨æ–¼æŒ‡å‡ºå…©è€…é–“çš„å·®ç•° ã€å°æ¯”ã€è½‰æŠ˜

- I prefer to go for a run in the morning, **as opposed to** working out in the evening.

`working out` : é›éŠ ( è·‘æ­¥ å¥èº« èˆ‰é‡éƒ½å¯ä»¥å”· )

`a ton of` :

- `8:25` å‡ºç¾ have a ton of data 

- ä¿šèª æ•¸æ“šé‡å¾ˆå¤§

`compromise` : å¦¥å” è®“æ­¥  /ËˆkÉ‘Ëm.prÉ™.maÉªz/

- `8:32` ä¹‹å¾Œå‡ºç¾çš„ ä¸‹é¢å¥å­é‚£ä¹Ÿæœ‰ ç²—é«”

- `verb`  `å¦¥å”`  `è®“æ­¥` 
  
  - Party unity is threatened when members will not compromise.
  
  - Well, you want \$400 and I say  \$300, so let's compromise at/on \$350.

- `verb`  `çœ‹è‹±è­¯` to allow your principles to be less strong or your standards or morals to be lower
  
  - If we **back down** on this issue, our **reputation** will be compromised.   - [ /ËŒrep.jÉ™ËˆteÉª.ÊƒÉ™n/ ]

- `verb` `å±åŠ` to risk having a harmful effect on something
  
  - We would never compromise the safety of our passengers.

`intended for` :

- `9:07` æè¿°æŸ [ç‰©å“] [è¨Šæ¯] [æœå‹™] [è¡Œå‹•] çš„é æœŸå°è±¡ã€ç›®æ¨™ç”¨æˆ¶

- This toy is intended for children ages 3 to 5.

- The event is intended for staff members only.

`help me out a ton` :

- å£èªçš„å¹«...å¾ˆå¤§çš„å¿™

## å¥å­

---

> and are **then** sent with every subsequent request.

`2:28` ä¹Ÿæœ‰ç”¨åˆ° `then`   

    è§£é‡‹ : ( then  ç„¶å¾Œ ) åœ¨é€™é‚Šè¡¨ç¤ºæ™‚é–“ã€é †åº

---

> if they're valid it's going to **instead of creating** a session in the database. it's going to create a token.

`2:12`        

    é€™é‚Šæœ‰é»è½åŠ›éšœç¤™ï¼Œå¯çœ‹ä¸€ä¸‹instead of vingã€‚    

---

> keep these secret and if they **ever** get leaked or exposed that you change the key **right away**

`2:35`

    ever æ›¾ç¶“
    right away ç«‹åˆ»

---

> which it will then get stored in local storage it could also be stored in a cookie **either way**

`2:46`

    either way ä¸ç®¡é¸æ“‡å“ªä¸€å€‹ç”¨æ³• çµæœéƒ½æœƒæ˜¯ä¸€æ¨£çš„

---

`3:08` 

> so if the validation succeeds it's **assumed** that the user is authenticated

```
assumed æœ‰é»é›£è½æ‡‚
```

---

`3:18` ã€`4:20` 

> so now i want to **go over** the differences between the two 

```
go over è¨è«– å¯©æŸ¥ æª¢æŸ¥ è©³ç´°è¬›è§£
```

---

`3:34`

> with sessions the authentication state is stored on the server **either** in the database or in memory **whereas** the token is stateless all the info is in the token and  **nowhere** else

```
eitherå¿µä½œ: ã„Ÿder æˆ– ä¸€der  
ä¸æ˜¯åœ¨serverçš„memoryå°±æ˜¯åœ¨databaseã€‚

stored on the server æŠ½è±¡æ¦‚å¿µçš„å„²å­˜
whereas ç„¶è€Œã€è¡¨ç¤ºå°æ¯”
nowhere else è¡¨ç¤ºä¸åœ¨å…¶ä»–åœ°æ–¹
```

```
æ“å ´è¡¨é¢ä¸Š
The kids are playing on the playground.

æ“å ´ç¯„åœå…§
There is a tree in the playground
She's waiting for her friends in the playground
```

---

`4:09`

> we'll see that later and lastly sessions are **vulnerable** to csrf attacks whereas tokens are **vulnerable** to cross-site scripting and i'm not going to go in **depth** onto what those are but you can **look them up** if you want

```
vulnerable > è½åŠ›+ä¸ç†Ÿæ‚‰+èªé€Ÿå¿«!
go in depth è¡¨ç¤ºæ·±å…¥æ¢è¨  /depÎ¸/
onto é€éä»‹ä¿‚è©å¼•å°è¨è«–å°è±¡
look them up æŸ¥æ‰¾ã€é€™åªæ˜¯æŠŠ them æ“ºä¸­é–“
```

---

`4:29`

> this is the token and it's **made up of** three different parts all separated by a dot

```
 made up of å¦‚ä½•æ§‹æˆæŸå€‹ç‰©å“ã€æ¦‚å¿µã€åœ˜é«”
```

â€‹        ä¾‹å¥å¦‚ä¸‹

- This dish is made up of various spices and herbs, creating a unique flavor.

- The report is made up of three main sections: introduction, analysis, and conclusion.

- The novel is made up of multiple storylines that eventually **intertwine**.

- The study group is made up of students from different backgrounds.

- The companyâ€™s success is made up of its **innovative** ideas and **dedicated** employees.

---

`4:44` 

> and then the token type which is jwt and **so** it's going to take this json ... 

```
so è¡¨ç¤ºåŸºæ–¼å‰é¢æåˆ°çš„æƒ…æ³æˆ–è¨Šæ¯ å¼•å°å‡ºå¾ŒçºŒçš„è§£é‡‹ã€çµè«–
```

---

`5:41` 

> and now the signature is created by **taking** the header and the payload

```
è®€å– / æå– ç¸½ä¹‹å°±æ˜¯åŸ·è¡ŒæŸç¨®å‹•ä½œ è‡ªå·±å»æ¨è«–
```

---

`6:50` 

> but if i **go in** here and  i add a letter to the secret  you'll see that **althought** the payload and the header didn't change the **signature** change

```
go in å¯ä»¥è§€å¯Ÿè¢å¹•å¥¹åœ¨å¹¹å˜›ï¼Œ
```

---

`7:35` 

> if someone **were to** generate a token with the same header and payload but a different secret this output of the hash will be different from the original token that was signed so we'll know that the token is not valid 

---

`7:48` 

> and another thing to note with hash functions is given just the output it is **practically** impossible to get the original input and so that's why we have to take the original input and hash it and then compare that value to the signature **as opposed to** just taking the signature and trying to decrypt it somehow um with hash functions you **can't** do that

```
practically   :  almost or very nearly (å¹¾ä¹) / å¯¦éš›åœ° 
as opposed to :  ç”¨æ–¼æŒ‡å‡ºå…©è€…é–“çš„å·®ç•° ã€å°æ¯”ã€è½‰æŠ˜
can't 
```

[(46) æ¬¸ï¼Ÿä½ èƒ½è½å¾—å‡ºå·®åˆ¥å—ï¼Ÿæˆ‘ä¾†æ•™ä½ å¦‚ä½•åˆ†è¾¨ can è·Ÿ can't ï¼ã€ç™¼éŸ³æ•™å­¸ã€‘ - YouTube](https://www.youtube.com/watch?v=C_WnVduOqyk)

---

`8:15` 

> go over some best practices

```
åˆæ go over : é€²ä¸€æ­¥è¨è«–ã€è©³ç´°è¨è«–
```

> so first you want to keep tokens **relatively** small

```
æ³¨æ„è½æ‰æœ‰ relatively é‡éŸ³ åœ¨é–‹é ­! 
```

---

`8:32` 

> because as you saw anybody can **paste in** a token and decode all those values so that's publicly accessible 

```
å°‡æŸç‰©è²¼åˆ°ç‰¹å®šä½ç½®æˆ–å®¹å™¨ä¸­
```

> you also want to have short expirations with tokens because if a user's token get's **compromised** ,you wouldn't wnat somebody else to use  it for a long time and be able to act as  that user.

```
å±å®³ to risk having a harmful effect on something
```

---

`8:52` 

> implements refresh tokens so that the user doesn't have to **keep signing in** if their normal access token was expired

```
æŒçºŒ ç™»å…¥  
```

--- 

`9:07` 

> where the token is being signed from and who it is **intended for** so it just adds some context and some more security 

```
intended for æè¿°æŸ [ç‰©å“] [è¨Šæ¯] [æœå‹™] [è¡Œå‹•] çš„é æœŸå°è±¡ã€ç›®æ¨™ç”¨æˆ¶ 
```

---

`10:22` 

> you can see that there's a question mark here because if you're using refresh token **rotation** then every time you refresh an access token you will also get a new refresh token to use on the next request

```
using refresh token rotation 

é€™é‚Šçš„ rotation ä»£è¡¨ ä¸€ç¨®å®‰å…¨å¯¦è¸ security practice
å¸¸è¢«ç”¨ä¾†æŒ‡ [å®šæœŸæ›´æ›å¯†ç¢¼ä¹‹é¡çš„æé«˜å®‰å…¨æ€§]  ç­–ç•¥
```

---

`11:01` 

> you would generate a new access token **along with** a new refresh token for the next request 

```
ä¼´éš¨è‘—...
```

---

`11:20` 

> help me out a ton

```
å¹«å¾ˆå¤§å¿™
```

--- 

## å¤§æ„ : ç‰‡æ®µæ“·å–

> session  å¼±é»æ˜¯ csrf (cross-site request forgery) è·¨ç¶²ç«™è«‹æ±‚å½é€ 

```
åˆ©ç”¨ç¶²ç«™(SERVER)å°ä½¿ç”¨è€…ç¶²é ç€è¦½å™¨çš„ä¿¡ä»»

åªèƒ½ä¿è­‰é€™å€‹Request ç™¼è‡ªæŸå€‹ User ï¼Œå»ä¸èƒ½ä¿è­‰è«‹æ±‚æœ¬èº«æ˜¯ User è‡ªé¡˜ç™¼å‡ºçš„ã€‚
```

> token å¼±é»æ˜¯ cross-site scripting (XSS)

```
åˆ©ç”¨ä½¿ç”¨è€…å°æŒ‡å®šç¶²ç«™çš„ä¿¡ä»»
```

## å»¶ä¼¸é–±è®€

> [é›¶åŸºç¤è³‡å®‰ç³»åˆ—ï¼ˆä¸€ï¼‰-èªè­˜ CSRFï¼ˆCross Site Request Forgeryï¼‰ (cymetrics.io)](https://tech-blog.cymetrics.io/posts/jo/zerobased-cross-site-request-forgery/)
